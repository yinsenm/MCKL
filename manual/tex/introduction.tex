% ============================================================================
%  MCKL/manual/tex/introduction.tex
% ----------------------------------------------------------------------------
%  MCKL: Monte Carlo Kernel Library
% ----------------------------------------------------------------------------
%  Copyright (c) 2013-2017, Yan Zhou
%  All rights reserved.
%
%  Redistribution and use in source and binary forms, with or without
%  modification, are permitted provided that the following conditions are met:
%
%    Redistributions of source code must retain the above copyright notice,
%    this list of conditions and the following disclaimer.
%
%    Redistributions in binary form must reproduce the above copyright notice,
%    this list of conditions and the following disclaimer in the documentation
%    and/or other materials provided with the distribution.
%
%  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
%  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
%  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
%  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
%  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
%  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
%  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
%  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
%  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
%  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
%  POSSIBILITY OF SUCH DAMAGE.
% ============================================================================

\chapter{Introduction}
\label{chap:Introduction}

\section{Organization of Headers}
\label{sec:Organization of Headers}

\mckl is a header-only library. All headers files are under the |mckl|
directory. To include all functionalities,
\begin{verbatim}
#include <mckl/mckl.hpp>
\end{verbatim}
There are a few other headers that include a subset of functionalities of
\mckl, each documented in a subsequent chapter in this manual. They are listed
in table~\ref{tab:headers}. These headers does not define anything other than
including other headers that each implement a specific feature. If only a few
features are needed, then one can include only headers that implement those
features to save compilation time. For example,
\begin{verbatim}
#include <mckl/random/threefry.hpp>
\end{verbatim}
includes the header that implements \rng engines based on the Threefry
algorithm in~\cite{Salmon:2011um} (see section~\ref{sub:Threefry}). See the
reference manual\footnote{\url{http://zhouyan.github.io/MCKLDoc/master}} for
the header file for each class and function defined in \mckl.

\section{Optional Runtime Library}
\label{sec:Optional Runtime Library}

In addition to the header-only library, one can optionally build and use a
runtime library. To build the library, one need a recent version of the
\nasm\footnote{\url{http://www.nasm.us}} assembler and the
\cmake\footnote{\url{https://cmake.org}} program. The library is only supported
on x86-64 \cpu{}s and 64-bit \unix and compatible systems.

To build and install the library,
\begin{verbatim}
cd /path/to/mckl/source
mkdir -p build
cd build
cmake .. -DCMAKE_INSTALL_PREFIX=/prefix/to/install/directory
make lib
make install
\end{verbatim}
To use and link to the library in a user program, say |prog.cpp|,
\begin{verbatim}
c++ -DMCKL_USE_ASM_LIB=1 -o prog prog.cpp -lmckl
\end{verbatim}

The runtime library provides optimized implementation of selected \rng{}s.
Performance of the header-only implementation might vary considerably depending
on the compiler. Though even the worst case, the performance is still better
than most alternatives, the best performance of some \rng{}s can provide best
performance regardless of the choice of compiler.

Further, one can define a configuration macro |MCKL_USE_ASM_VMF| to a non-zero
value, to use an assembly implementation of selected vectorized math functions
when \mkl \vml is unavailable, see~\ref{sec:Vectorized Functions}. This feature
is highly experimental. These functions are fast, but have slightly lower
accuracy for some values of input than the standard library or \mkl \vml in
high accuracy mode.

\begin{table}[ht]
  \begin{tabularx}{\textwidth}{LL}
    \toprule
    Header & Documents \\
    \midrule
    \texttt{mckl/core.hpp}     & Chapter~\ref{chap:Building Blocks}          \\
    \texttt{mckl/algorithm.hpp}& Chapter~\ref{chap:Algorithms}               \\
    \texttt{mckl/smp.hpp}      & Chapter~\ref{chap:Symmetric Multiprocessing}\\
    \texttt{mckl/math.hpp}     & Chapter~\ref{chap:Mathemtical Functions}    \\
    \texttt{mckl/random.hpp}   & Chapter~\ref{chap:Random Number Generating} \\
    \texttt{mckl/random/rng.hpp}
    & Sections~\ref{sec:Counter-Based Random Number Generators}
    to~\ref{sec:Non-Deterministic Random Number Generators} \\
    \texttt{mckl/random/distribution.hpp}
    & Sections~\ref{sec:Uniform Bits Distribution}
    to~\ref{sec:Multivariate Distribution} \\
    \texttt{mckl/utility.hpp} & Chapter~\ref{chap:Utilities} \\
    \bottomrule
  \end{tabularx}
  \caption{Top-level headers}
  \label{tab:headers}
\end{table}
